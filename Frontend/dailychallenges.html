<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FeelWise - Daily Challenges</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
 <link rel="stylesheet" href="dc.css">
</head>

<body>
  <div class="top-header">
    <div class="logo">
      <i class="fas fa-brain"></i>
      <span>FeelWise</span>
    </div>
    
  </div>
  
  <div class="container">
    <div class="page-title">
      <h1>DAILY EMOTIONAL CHALLENGES</h1>
      <p>Select an emotion to explore today's challenge</p>
    </div>
    
    <div class="motivation-text">
      <p>"Understanding your emotions is the first step towards emotional intelligence. Take a moment to explore how you feel today."</p>
    </div>
    
   
    
    <div class="row">
      <div class="col-md-4 col-sm-6 mb-4">
        <div class="emotion-card happy" onclick="saveChallenge('Happy','happy.html')">
          <div class="pulse-effect"></div>
          <div class="emotion-icon">üòä</div>
          <div class="emotion-name">Happy</div>
          <div class="emotion-description">Explore activities to boost your happiness and joy</div>
          <div class="completion-badge"><i class="fas fa-check"></i></div>
        </div>
      </div>
      
      <div class="col-md-4 col-sm-6 mb-4">
        <div class="emotion-card love" onclick="saveChallenge('Love','love.html')">
          <div class="pulse-effect"></div>
          <div class="emotion-icon">üíñ</div>
          <div class="emotion-name">Love</div>
          <div class="emotion-description">Cultivate love and compassion for yourself and others</div>
          <div class="completion-badge"><i class="fas fa-check"></i></div>
        </div>
      </div>
      
      <div class="col-md-4 col-sm-6 mb-4">
        <div class="emotion-card sad" onclick="saveChallenge('Sad','sad.html')">
          <div class="pulse-effect"></div>
          <div class="emotion-icon">‚òπÔ∏è</div>
          <div class="emotion-name">Sad</div>
          <div class="emotion-description">Learn healthy ways to process and overcome sadness</div>
          <div class="completion-badge"><i class="fas fa-check"></i></div>
        </div>
      </div>
      
      <div class="col-md-4 col-sm-6 mb-4">
        <div class="emotion-card fear" onclick="saveChallenge('Fear','fear.html')">
          <div class="pulse-effect"></div>
          <div class="emotion-icon">üò∞</div>
          <div class="emotion-name">Fear</div>
          <div class="emotion-description">Face your fears and build courage</div>
          <div class="completion-badge"><i class="fas fa-check"></i></div>
        </div>
      </div>
      
      <div class="col-md-4 col-sm-6 mb-4">
        <div class="emotion-card surprised" onclick="saveChallenge('Surprised','surprised.html')">
          <div class="pulse-effect"></div>
          <div class="emotion-icon">üò≤</div>
          <div class="emotion-name">Surprised</div>
          <div class="emotion-description">Embrace the unexpected and cultivate wonder</div>
          <div class="completion-badge"><i class="fas fa-check"></i></div>
        </div>
      </div>
      
      <div class="col-md-4 col-sm-6 mb-4">
        <div class="emotion-card angry" onclick="saveChallenge('Angry','angry.html')">
          <div class="pulse-effect"></div>
          <div class="emotion-icon">üò†</div>
          <div class="emotion-name">Angry</div>
          <div class="emotion-description">Manage anger constructively and find peace</div>
          <div class="completion-badge"><i class="fas fa-check"></i></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const API_BASE = "http://localhost:5000/api/progress";
    
    // Initialize progress (in a real app, this would come from the API)
    document.addEventListener('DOMContentLoaded', function() {
      // Simulate progress data
      setTimeout(() => {
        const progress = 33; // This would come from API in real app
        document.getElementById('progress-percent').textContent = progress + '%';
        document.getElementById('progress-fill').style.width = progress + '%';
      }, 500);
      
      // Check completed challenges (simulated)
      const completedChallenges = ['Happy', 'Love']; // This would come from API
      completedChallenges.forEach(emotion => {
        const card = document.querySelector(`.emotion-card.${emotion.toLowerCase()}`);
        if (card) {
          card.classList.add('completed');
        }
      });
    });

    async function saveChallenge(mood, url) {
      const token = localStorage.getItem("token");
      if (!token) {
        alert("Please login first.");
        return;
      }

      try {
        await fetch(`${API_BASE}/challenge`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
          },
          body: JSON.stringify({ moduleId: mood, status: "completed" }),
        });
      } catch (err) {
        console.error("Error saving challenge:", err);
      }

      // redirect to challenge page
      window.location.href = url;
    }
  </script>
</body>
</html>