<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Speech Emotion Analysis - FeelWise</title>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Quicksand:wght@400;500;700&display=swap" rel="stylesheet">
  
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <!-- External CSS -->
  <link rel="stylesheet" href="speech-analysis.css">
</head>

<body>
  <!-- Header with Navigation -->
  <header class="site-header">
    <div class="header-content">
      <div class="logo-container">
        <h1 class="logo">
          <i class="fas fa-brain"></i>
          FeelWise
        </h1>
      </div>
      <nav class="main-nav">
      <a href="module.html" class="nav-link"><i class="fas fa-chart-line"></i> Dashboard</a>
        <a href="progress.html" class="nav-link"><i class="fas fa-history"></i> History</a>
        <a href="profile.html" class="nav-link"><i class="fas fa-user"></i> Profile</a>
      </nav>
    </div>
  </header>

  <div class="container">
    <div class="header">
      <h1>Speech Emotion Analysis</h1>
      <p>Understand your emotions through your voice with our advanced AI-powered analysis</p>
      <a href="module.html" class="back-btn"><i class="fas fa-arrow-left"></i> Go Back to Modules</a>
    </div>

    <div class="main-content">

      <!-- Input Section -->
      <div class="input-section speech-mode">
        <p>Click "Start" to begin recording your voice and share your thoughts. Our AI will analyze the emotional content in real-time.</p>
        <div class="controls">
          <button id="startRecordingBtn" type="button"><i class="fas fa-microphone"></i> Start Recording</button>
          <button id="stopRecordingBtn" type="button" disabled><i class="fas fa-stop"></i> Stop Recording</button>
        </div>

        <div class="transcript-box">
          <h3><i class="fas fa-scroll"></i> Live Transcript</h3>
          <div id="transcriptDisplay" class="transcript-display">Your speech will appear here...</div>
          
        </div>
      </div>

           <!-- Results Section -->
      <div class="results-section">
        <div class="emotion-report">
          <h2><i class="fas fa-chart-pie"></i> Your Emotion Report</h2>
          <div id="emotionResult" class="emotion-result">
            <p>Speech-based emotion analysis results will be displayed here after recording.</p>
          </div>
        </div>

        <div class="progress-section">
          <h2><i class="fas fa-trending-up"></i> Your Emotional Progress</h2>
          <div style="display: flex;" class="time-filters">
            <button class="time-filter active" data-period="daily" type="button">Daily</button>
            <button class="time-filter" data-period="weekly" type="button">Weekly</button>
            <button class="time-filter" data-period="monthly" type="button">Monthly</button>
          </div>
          
          <!-- New Emotion Report Card matching the image style -->
          <div id="progressReportCard" class="progress-report-card" style="display: none;">
            <div class="report-header">
              <h3>Your Emotion Report</h3>
              <p>Your analysis will appear here after you share your thoughts</p>
            </div>
            
            <div class="dominant-emotion">
              <h4>Dominant Emotion:</h4>
              <div id="dominantEmotion" class="dominant-emotion-value">Joy</div>
            </div>
            
            <div class="detailed-emotion-distribution">
              <h4>Detailed Emotion Distribution</h4>
              <div class="emotion-bars">
                <div class="emotion-bar">
                  <span class="emotion-label">Joy</span>
                  <div class="bar-container">
                    <div id="joyBar" class="bar-fill joy" style="width: 100%"></div>
                  </div>
                  <span id="joyPercent" class="emotion-percent">100%</span>
                </div>
                <div class="emotion-bar">
                  <span class="emotion-label">Sadness</span>
                  <div class="bar-container">
                    <div id="sadnessBar" class="bar-fill sadness" style="width: 0%"></div>
                  </div>
                  <span id="sadnessPercent" class="emotion-percent">0%</span>
                </div>
                <div class="emotion-bar">
                  <span class="emotion-label">Anger</span>
                  <div class="bar-container">
                    <div id="angerBar" class="bar-fill anger" style="width: 0%"></div>
                  </div>
                  <span id="angerPercent" class="emotion-percent">0%</span>
                </div>
                <div class="emotion-bar">
                  <span class="emotion-label">Fear</span>
                  <div class="bar-container">
                    <div id="fearBar" class="bar-fill fear" style="width: 0%"></div>
                  </div>
                  <span id="fearPercent" class="emotion-percent">0%</span>
                </div>
                <div class="emotion-bar">
                  <span class="emotion-label">Surprise</span>
                  <div class="bar-container">
                    <div id="surpriseBar" class="bar-fill surprise" style="width: 0%"></div>
                  </div>
                  <span id="surprisePercent" class="emotion-percent">0%</span>
                </div>
                <div class="emotion-bar">
                  <span class="emotion-label">Love</span>
                  <div class="bar-container">
                    <div id="loveBar" class="bar-fill love" style="width: 0%"></div>
                  </div>
                  <span id="lovePercent" class="emotion-percent">0%</span>
                </div>
              </div>
            </div>
            
            <div class="report-footer">
              <button id="viewDetailedReport" class="view-report-btn">View your detailed assessment report</button>
            </div>
          </div>
          
          <canvas id="progressChart"></canvas>
        </div>
      </div>

      <!-- Recommendations Section -->
      <div class="recommendations-section">
        <div class="recommendations">
          <h2><i class="fas fa-lightbulb"></i> Recommendations</h2>
          <div id="recommendationsContent">
            <p>Personalized suggestions based on your voice emotion will be shown here.</p>
          </div>
        </div>

        <div class="daily-challenge">
          <h2><i class="fas fa-tasks"></i> Daily Challenge</h2>
          <div id="dailyChallengeContent">
            <p>Complete your voice-based challenge to boost emotional strength!</p>
          </div>
        </div>

        <div class="tip-of-the-day">
          <h2><i class="fas fa-info-circle"></i> Tip of the Day</h2>
          <div id="dailyTipContent">
            <p>Loading today's speech well-being tip...</p>
          </div>
        </div>
      </div>

    </div>
  </div>

<!-- Footer -->
  <footer class="site-footer">
    <div class="footer-content">
      <div class="footer-section">
        <h3>FeelWise</h3>
        <p>Understanding emotions through AI-powered analysis</p>
      </div>
      <div class="footer-section">
        <h4>Resources</h4>
        <a href="#"><i class="fas fa-blog"></i> Blog</a>
        <a href="#"><i class="fas fa-book"></i> Guides</a>
        <a href="#"><i class="fas fa-question-circle"></i> Support</a>
      </div>
      <div class="footer-section">
        <h4>Company</h4>
        <a href="#"><i class="fas fa-users"></i> About Us</a>
        <a href="#"><i class="fas fa-briefcase"></i> Careers</a>
        <a href="#"><i class="fas fa-envelope"></i> Contact</a>
      </div>
      <div class="footer-section">
        <h4>Connect</h4>
        <div class="social-links">
          <a href="#"><i class="fab fa-twitter"></i></a>
          <a href="#"><i class="fab fa-facebook"></i></a>
          <a href="#"><i class="fab fa-instagram"></i></a>
          <a href="#"><i class="fab fa-linkedin"></i></a>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2023 FeelWise. All rights reserved.</p>
      <div class="footer-links">
        <a href="#">Privacy Policy</a>
        <a href="#">Terms of Service</a>
        <a href="#">Cookie Policy</a>
      </div>
    </div>
  </footer>

  <!-- External JavaScript -->
  <script src="speech-analysis.js"></script>
  
  <script>
    // Show/hide processing indicator during recording analysis
    const processingIndicator = document.getElementById('processingIndicator');

    function showProcessing() {
      processingIndicator.style.display = 'flex';
    }

    function hideProcessing() {
      processingIndicator.style.display = 'none';
    }

    // Add recording state visual feedback
    const startBtn = document.getElementById('startRecordingBtn');
    const stopBtn = document.getElementById('stopRecordingBtn');
    const transcriptDisplay = document.getElementById('transcriptDisplay');
    
    startBtn.addEventListener('click', () => {
      startBtn.classList.add('recording');
      transcriptDisplay.classList.add('active');
      showProcessing();
    });
    
    stopBtn.addEventListener('click', () => {
      startBtn.classList.remove('recording');
      showProcessing();
    });

    // Enhanced UI feedback for emotion analysis completion
    document.addEventListener('DOMContentLoaded', function() {
      const emotionResult = document.getElementById('emotionResult');
      const recommendationsContent = document.getElementById('recommendationsContent');
      const dailyChallengeContent = document.getElementById('dailyChallengeContent');
      const dailyTipContent = document.getElementById('dailyTipContent');

      // Override the original analyzeSpeech function to add processing indicator
      const originalAnalyzeSpeech = window.analyzeSpeech;
      if (originalAnalyzeSpeech) {
        window.analyzeSpeech = async function(transcript, audioBase64) {
          showProcessing();
          try {
            await originalAnalyzeSpeech.call(this, transcript, audioBase64);
          } finally {
            hideProcessing();
          }
        };
      }

      // Add enhanced visual feedback for successful analysis
      const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
          if (mutation.target.id === 'emotionResult' && mutation.target.innerHTML.includes('emotion-report-card')) {
            // Add success animation
            mutation.target.style.animation = 'fadeInUp 0.6s ease-out';
            hideProcessing();
          }
          if (mutation.target.id === 'recommendationsContent' && mutation.target.innerHTML.includes('recommendation-card-enhanced')) {
            mutation.target.style.animation = 'fadeInLeft 0.8s ease-out 0.2s both';
          }
          if (mutation.target.id === 'dailyChallengeContent' && mutation.target.innerHTML.includes('challenge-card-enhanced')) {
            mutation.target.style.animation = 'fadeInUp 0.8s ease-out 0.4s both';
          }
          if (mutation.target.id === 'dailyTipContent' && mutation.target.innerHTML.includes('tip-card-enhanced')) {
            mutation.target.style.animation = 'fadeInRight 0.8s ease-out 0.6s both';
          }
        });
      });

      observer.observe(document.body, {
        childList: true,
        subtree: true
      });

      // Add CSS animations
      const style = document.createElement('style');
      style.textContent = `
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        @keyframes fadeInLeft {
          from {
            opacity: 0;
            transform: translateX(-30px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }
        @keyframes fadeInRight {
          from {
            opacity: 0;
            transform: translateX(30px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }
      `;
      document.head.appendChild(style);
    });
  </script>
</body>

</html>