<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FeelWise - Surprised Challenges</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="challenges.css" />
  </head>
  <body>
     <header class="site-header">
      <div class="header-content">
        <div class="logo-container">
          <h1 class="logo">
            <i class="fas fa-brain"></i>
            FeelWise
          </h1>
        </div>
        <nav class="main-nav">
          <a href="module.html" class="nav-link"><i class="fas fa-chart-line"></i> Dashboard</a>
          <a href="progress.html" class="nav-link"><i class="fas fa-history"></i> History</a>
          <a href="profile.html" class="nav-link"><i class="fas fa-user"></i> Profile</a>
        </nav>
      </div>
    </header>

    <!-- Background Particles -->
    <div class="particles-container" id="particles-container"></div>

    <div class="main-container">
      <div class="text-center">
        <h1 class="fear-title">üò≤ SURPRISED / AMAZED CHALLENGES</h1>
      </div>

      <!-- Challenge Section -->
      <div class="fear-card" id="challenge-container">
        <div class="reset-notice">
          <i class="fas fa-lightbulb me-2"></i>
          <strong>Pro Tip:</strong> You can retake these challenges anytime by
          refreshing the page or clicking "Retake Challenges" after completion!
        </div>

        <div class="challenges-grid">
          <!-- Challenge 1 -->
          <div class="challenge-item">
            <div class="challenge-icon"><i class="fas fa-search"></i></div>
            <h2>üîç Spot the Unexpected</h2>
            <p>Take 5 mins to notice something new in your surroundings</p>
            <button class="challenge-btn" onclick="acceptChallenge('spot')">Accept Challenge</button>
            <button class="complete-btn" id="spot-complete" onclick="completeChallenge('spot')"><i class="fas fa-check-circle me-2"></i>Completed</button>
            <div class="progress-wrapper"><div class="progress-bar" id="spot-progress"></div></div>
          </div>

          <!-- Challenge 2 -->
          <div class="challenge-item">
            <div class="challenge-icon"><i class="fas fa-gift"></i></div>
            <h2>üéÅ Mystery Treat</h2>
            <p>Try a food, drink, or activity you've never experienced before</p>
            <button class="challenge-btn" onclick="acceptChallenge('treat')">Accept Challenge</button>
            <button class="complete-btn" id="treat-complete" onclick="completeChallenge('treat')"><i class="fas fa-check-circle me-2"></i>Completed</button>
            <div class="progress-wrapper"><div class="progress-bar" id="treat-progress"></div></div>
          </div>

          <!-- Challenge 3 -->
          <div class="challenge-item">
            <div class="challenge-icon"><i class="fas fa-camera"></i></div>
            <h2>üì∏ Capture the Moment</h2>
            <p>Take a photo of something that made you say "wow" today</p>
            <button class="challenge-btn" onclick="acceptChallenge('photo')">Accept Challenge</button>
            <button class="complete-btn" id="photo-complete" onclick="completeChallenge('photo')"><i class="fas fa-check-circle me-2"></i>Completed</button>
            <div class="progress-wrapper"><div class="progress-bar" id="photo-progress"></div></div>
          </div>

          <!-- Challenge 4 -->
          <div class="challenge-item">
            <div class="challenge-icon"><i class="fas fa-tree"></i></div>
            <h2>üå≥ Nature Surprise</h2>
            <p>Find an unusual plant, cloud, or natural detail outside</p>
            <button class="challenge-btn" onclick="acceptChallenge('nature')">Accept Challenge</button>
            <button class="complete-btn" id="nature-complete" onclick="completeChallenge('nature')"><i class="fas fa-check-circle me-2"></i>Completed</button>
            <div class="progress-wrapper"><div class="progress-bar" id="nature-progress"></div></div>
          </div>

          <!-- Challenge 5 -->
          <div class="challenge-item">
            <div class="challenge-icon"><i class="fas fa-random"></i></div>
            <h2>üé≤ Random Fact</h2>
            <p>Search for one surprising fact you didn‚Äôt know before</p>
            <button class="challenge-btn" onclick="acceptChallenge('fact')">Accept Challenge</button>
            <button class="complete-btn" id="fact-complete" onclick="completeChallenge('fact')"><i class="fas fa-check-circle me-2"></i>Completed</button>
            <div class="progress-wrapper"><div class="progress-bar" id="fact-progress"></div></div>
          </div>

          <!-- Challenge 6 -->
          <div class="challenge-item">
            <div class="challenge-icon"><i class="fas fa-laugh"></i></div>
            <h2>üòÇ Unexpected Humor</h2>
            <p>Watch a funny clip that completely surprises you</p>
            <button class="challenge-btn" onclick="acceptChallenge('humor')">Accept Challenge</button>
            <button class="complete-btn" id="humor-complete" onclick="completeChallenge('humor')"><i class="fas fa-check-circle me-2"></i>Completed</button>
            <div class="progress-wrapper"><div class="progress-bar" id="humor-progress"></div></div>
          </div>

          <!-- Challenge 7 -->
          <div class="challenge-item">
            <div class="challenge-icon"><i class="fas fa-user-friends"></i></div>
            <h2>üë• Unexpected Kindness</h2>
            <p>Do one small but surprising act of kindness today</p>
            <button class="challenge-btn" onclick="acceptChallenge('kindness')">Accept Challenge</button>
            <button class="complete-btn" id="kindness-complete" onclick="completeChallenge('kindness')"><i class="fas fa-check-circle me-2"></i>Completed</button>
            <div class="progress-wrapper"><div class="progress-bar" id="kindness-progress"></div></div>
          </div>

          <!-- Challenge 8 -->
          <div class="challenge-item">
            <div class="challenge-icon"><i class="fas fa-book"></i></div>
            <h2>üìñ Learn the Unseen</h2>
            <p>Read about a culture or topic completely new to you</p>
            <button class="challenge-btn" onclick="acceptChallenge('learn')">Accept Challenge</button>
            <button class="complete-btn" id="learn-complete" onclick="completeChallenge('learn')"><i class="fas fa-check-circle me-2"></i>Completed</button>
            <div class="progress-wrapper"><div class="progress-bar" id="learn-progress"></div></div>
          </div>

          <!-- Challenge 9 -->
          <div class="challenge-item">
            <div class="challenge-icon"><i class="fas fa-magic"></i></div>
            <h2>‚ú® Magic Trick</h2>
            <p>Learn a simple magic trick and try it on someone</p>
            <button class="challenge-btn" onclick="acceptChallenge('magic')">Accept Challenge</button>
            <button class="complete-btn" id="magic-complete" onclick="completeChallenge('magic')"><i class="fas fa-check-circle me-2"></i>Completed</button>
            <div class="progress-wrapper"><div class="progress-bar" id="magic-progress"></div></div>
          </div>

          <!-- Challenge 10 -->
          <div class="challenge-item">
            <div class="challenge-icon"><i class="fas fa-music"></i></div>
            <h2>üé∂ New Sound</h2>
            <p>Listen to a song in a genre you‚Äôve never tried</p>
            <button class="challenge-btn" onclick="acceptChallenge('sound')">Accept Challenge</button>
            <button class="complete-btn" id="sound-complete" onclick="completeChallenge('sound')"><i class="fas fa-check-circle me-2"></i>Completed</button>
            <div class="progress-wrapper"><div class="progress-bar" id="sound-progress"></div></div>
          </div>

          <!-- Challenge 11 -->
          <div class="challenge-item">
            <div class="challenge-icon"><i class="fas fa-road"></i></div>
            <h2>üõ§Ô∏è New Path</h2>
            <p>Take a different route today and notice what‚Äôs new</p>
            <button class="challenge-btn" onclick="acceptChallenge('path')">Accept Challenge</button>
            <button class="complete-btn" id="path-complete" onclick="completeChallenge('path')"><i class="fas fa-check-circle me-2"></i>Completed</button>
            <div class="progress-wrapper"><div class="progress-bar" id="path-progress"></div></div>
          </div>

          <!-- Challenge 12 -->
          <div class="challenge-item">
            <div class="challenge-icon"><i class="fas fa-lightbulb"></i></div>
            <h2>üí° Aha Moment</h2>
            <p>Reflect on something ordinary in a completely new way</p>
            <button class="challenge-btn" onclick="acceptChallenge('aha')">Accept Challenge</button>
            <button class="complete-btn" id="aha-complete" onclick="completeChallenge('aha')"><i class="fas fa-check-circle me-2"></i>Completed</button>
            <div class="progress-wrapper"><div class="progress-bar" id="aha-progress"></div></div>
          </div>

        

        <button id="submit-challenges-btn" onclick="submitAllChallenges()">
          <i class="fas fa-paper-plane me-2"></i>Submit All Challenges
          <span id="submit-loading" class="loading-spinner" style="display: none"></span>
        </button>
      </div>

      <!-- Success Card -->
      <div class="success-card text-center" id="success-card">
        <h2><i class="fas fa-trophy me-2"></i>WELL DONE!</h2>
        <p>You successfully completed all Surprised challenges!</p>
        <p>Your sense of wonder is inspiring! üåü</p>
        <p id="save-status" style="color: var(--success); font-size: 14px"></p>
        <div class="mt-4">
          <button onclick="goToProgress()"><i class="fas fa-chart-line me-2"></i>View Progress</button>
          <button class="retake-btn" onclick="retakeChallenges()"><i class="fas fa-redo me-2"></i>Retake Challenges</button>
        </div>
      </div>
    </div>

<footer class="site-footer">
  <div class="footer-content">
    <div class="footer-section">
      <h3>FeelWise</h3>
      <p>Understanding emotions through AI-powered analysis</p>
    </div>
    <div class="footer-section">
      <h4>Resources</h4>
      <a href="#">Blog</a>
      <a href="#">Guides</a>
      <a href="#">Support</a>
    </div>
    <div class="footer-section">
      <h4>Company</h4>
      <a href="#">About Us</a>
      <a href="#">Careers</a>
      <a href="#">Contact</a>
    </div>
    <div class="footer-section">
      <h4>Connect</h4>
      <div class="social-links">
        <a href="#"><i class="fab fa-twitter"></i></a>
        <a href="#"><i class="fab fa-facebook"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-linkedin"></i></a>
      </div>
    </div>
  </div>
  <div class="footer-bottom">
    <p>&copy; 2023 FeelWise. All rights reserved.</p>
    <div class="footer-links">
      <a href="#">Privacy Policy</a>
      <a href="#">Terms of Service</a>
      <a href="#">Cookie Policy</a>
    </div>
  </div>
</footer>

<script>
  const API_BASE = "http://localhost:5000/api";
  let challenges = { spot: 0, treat: 0, photo: 0, nature: 0, fact: 0, humor: 0, kindness: 0, learn: 0, magic: 0, sound: 0, path: 0, aha: 0};

  // Particles
  function createParticles() {
    const container = document.getElementById("particles-container");
    const particleCount = 20;
    for (let i = 0; i < particleCount; i++) {
      const particle = document.createElement("div");
      particle.classList.add("particle");
      const size = Math.random() * 20 + 5;
      const posX = Math.random() * 100;
      const posY = Math.random() * 100;
      const delay = Math.random() * 10;
      const duration = 10 + Math.random() * 20;
      particle.style.width = `${size}px`;
      particle.style.height = `${size}px`;
      particle.style.left = `${posX}vw`;
      particle.style.top = `${posY}vh`;
      particle.style.animationDelay = `${delay}s`;
      particle.style.animationDuration = `${duration}s`;
      if (Math.random() > 0.7) particle.classList.add("flame");
      container.appendChild(particle);
    }
  }

  async function markChallengeComplete(key) {
    const token = localStorage.getItem("token");
    try {
      if (token) {
        await fetch(`${API_BASE}/progress/complete-challenge`, {
          method: "POST",
          headers: { "Content-Type": "application/json", Authorization: `Bearer ${token}` },
          body: JSON.stringify({ mood: "surprised", challenge: key }),
        });
        return "database";
      } else {
        let completed = JSON.parse(localStorage.getItem("completedChallenges") || "[]");
        completed.push({ mood: "surprised", challenge: key, time: Date.now() });
        localStorage.setItem("completedChallenges", JSON.stringify(completed));
        return "localStorage";
      }
    } catch (err) {
      console.error(err);
      return "localStorage";
    }
  }

  function acceptChallenge(key) {
    challenges[key] = 50;
    document.getElementById(key + "-progress").style.width = "50%";
    document.getElementById(key + "-complete").style.display = "inline-block";
    const btn = document.querySelector(`button[onclick="acceptChallenge('${key}')"]`);
    btn.classList.add("btn-accepted");
    btn.innerHTML = '<i class="fas fa-check me-2"></i>Accepted';
  }

  async function completeChallenge(key) {
    challenges[key] = 100;
    document.getElementById(key + "-progress").style.width = "100%";
    document.getElementById(key + "-complete").style.display = "none";
    await markChallengeComplete(key);
    checkSubmit();
  }

  function checkSubmit() {
    if (Object.values(challenges).every((v) => v === 100)) {
      document.getElementById("submit-challenges-btn").style.display = "block";
    }
  }

  function submitAllChallenges() {
    document.getElementById("challenge-container").style.display = "none";
    document.getElementById("success-card").style.display = "block";
    document.getElementById("save-status").textContent = "üéØ Progress recorded! You can retake the challenges anytime.";
  }

  function retakeChallenges() {
    resetAllChallenges();
  }

  function resetAllChallenges() {
    for (let key in challenges) challenges[key] = 0;
    document.getElementById("challenge-container").style.display = "block";
    document.getElementById("success-card").style.display = "none";
    document.getElementById("submit-challenges-btn").style.display = "none";
    document.querySelectorAll(".progress-bar").forEach((bar) => (bar.style.width = "0%"));
    document.querySelectorAll(".complete-btn").forEach((btn) => (btn.style.display = "none"));
    document.querySelectorAll(".challenge-btn").forEach((btn) => {
      btn.innerHTML = "Accept Challenge";
      btn.classList.remove("btn-accepted");
    });
  }

  function goToProgress() {
    window.location.href = "progress.html";
  }

  window.addEventListener("DOMContentLoaded", function () {
    createParticles();
    resetAllChallenges();
  });
</script>
</body>
</html>
